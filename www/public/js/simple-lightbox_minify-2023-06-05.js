!function(t,e,i,n){"use strict";t.fn.simpleLightbox=function(n){var a,o,s,n=t.extend({sourceAttr:"href",overlay:!0,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",captionClass:"",close:!0,closeText:"\xd7",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,scaleImageToRatio:!1,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0},n),l=(e.navigator.pointerEnabled||e.navigator.msPointerEnabled,0),r=0,c=t(),d=function(){var t=i.body||i.documentElement;return""===(t=t.style).WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},p=!1,h=[],g=n.rel&&!1!==n.rel?(a=n.rel,(o=t(this)).filter(function(){return t(this).attr("rel")===a})):this,d=d(),f=0,u=!1!==d,$="pushState"in history,m=!1,v=e.location,_=function(){return v.hash.substring(1)},x=_(),b=function(){_();var t="pid="+(I+1),e=v.href.split("#")[0]+"#"+t;$?history[m?"replaceState":"pushState"]("",i.title,e):m?v.replace(e):v.hash=t,m=!0},y=function(){$?history.pushState("",i.title,v.pathname+v.search):v.hash="",clearTimeout(s)},w=function(){m?s=setTimeout(b,800):b()},E="simplelb",C=t("<div>").addClass("sl-overlay"),S=t("<button>").addClass("sl-close").html(n.closeText),T=t("<div>").addClass("sl-spinner").html("<div></div>"),k=t("<div>").addClass("sl-navigation").html('<button class="sl-prev">'+n.navText[0]+'</button><button class="sl-next">'+n.navText[1]+"</button>"),q=t("<div>").addClass("sl-counter").html('<span class="sl-current"></span>/<span class="sl-total"></span>'),D=!1,I=0,A=t("<div>").addClass("sl-caption "+n.captionClass+" pos-"+n.captionPosition),R=t("<div>").addClass("sl-image"),M=t("<div>").addClass("sl-wrapper").addClass(n.className),O=function(e){if(!n.fileExt)return!0;var i=t(e).attr(n.sourceAttr).match(/\.([0-9a-z]+)(?=[?#])|(\.)(?:[\w]+)$/gmi);return i&&"a"==t(e).prop("tagName").toLowerCase()&&RegExp(".("+n.fileExt+")$","i").test(i)},P=function(e){e.trigger(t.Event("show.simplelightbox")),n.disableScroll&&(f=K("hide")),M.appendTo("body"),R.appendTo(M),n.overlay&&C.appendTo(t("body")),D=!0,I=g.index(e),c=t("<img/>").hide().attr("src",e.attr(n.sourceAttr)),-1==h.indexOf(e.attr(n.sourceAttr))&&h.push(e.attr(n.sourceAttr)),R.html("").attr("style",""),c.appendTo(R),X(),C.fadeIn("fast"),t(".sl-close").fadeIn("fast"),T.show(),k.fadeIn("fast"),t(".sl-wrapper .sl-counter .sl-current").text(I+1),q.fadeIn("fast"),z(),n.preloading&&Y(),setTimeout(function(){e.trigger(t.Event("shown.simplelightbox"))},n.animationSpeed)},z=function(i){if(c.length){var a=new Image,o=t(e).width()*n.widthRatio,s=t(e).height()*n.heightRatio;a.src=c.attr("src"),t(a).on("error",function(e){g.eq(I).trigger(t.Event("error.simplelightbox")),D=!1,p=!0,T.hide(),n.alertError&&alert(n.alertErrorMessage),1==i||-1==i?H(i):H(1)}),a.onload=function(){void 0!==i&&g.eq(I).trigger(t.Event("changed.simplelightbox")).trigger(t.Event((1===i?"nextDone":"prevDone")+".simplelightbox")),n.history&&w(),-1==h.indexOf(c.attr("src"))&&h.push(c.attr("src"));var l,r=a.width,d=a.height;if(n.scaleImageToRatio||r>o||d>s){var $=r/d>o/s?r/o:d/s;r/=$,d/=$}t(".sl-image").css({top:(t(e).height()-d)/2+"px",left:(t(e).width()-r-f)/2+"px"}),T.hide(),c.css({width:r+"px",height:d+"px"}).fadeIn("fast"),p=!0;var m="self"==n.captionSelector?g.eq(I):g.eq(I).find(n.captionSelector);if(l="data"==n.captionType?m.data(n.captionsData):"text"==n.captionType?m.html():m.prop(n.captionsData),!n.loop&&(0===I&&t(".sl-prev").hide(),I>=g.length-1&&t(".sl-next").hide(),I>0&&t(".sl-prev").show(),I<g.length-1&&t(".sl-next").show()),1==g.length&&t(".sl-prev, .sl-next").hide(),1==i||-1==i){var v={opacity:1};n.animationSlide&&(u?(W(0,100*i+"px"),setTimeout(function(){W(n.animationSpeed/1e3,"0px")},50)):v.left=parseInt(t(".sl-image").css("left"))+100*i+"px"),t(".sl-image").animate(v,n.animationSpeed,function(){D=!1,L(l)})}else D=!1,L(l);n.additionalHtml&&0===t(".sl-additional-html").length&&t("<div>").html(n.additionalHtml).addClass("sl-additional-html").appendTo(t(".sl-image"))}}},L=function(e){""!==e&&void 0!==e&&n.captions&&A.html(e).hide().appendTo(t(".sl-image")).delay(n.captionDelay).fadeIn("fast")},W=function(e,i){var n={};n[d+"transform"]="translateX("+i+")",n[d+"transition"]=d+"transform "+e+"s linear",t(".sl-image").css(n)},X=function(){t(e).on("resize."+E,z),t(i).on("click."+E+" touchstart."+E,".sl-close",function(t){t.preventDefault(),p&&j()}),n.history&&setTimeout(function(){t(e).on("hashchange."+E,function(){if(p&&_()===x){j();return}})},40),k.on("click."+E,"button",function(e){e.preventDefault(),l=0,H(t(this).hasClass("sl-next")?1:-1)});var a=0,o=0,s=0,c=0,d=!1,h=0;R.on("touchstart."+E+" mousedown."+E,function(t){return!!d||(u&&(h=parseInt(R.css("left"))),d=!0,l=0,r=0,a=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,s=t.originalEvent.pageY||t.originalEvent.touches[0].pageY,!1)}).on("touchmove."+E+" mousemove."+E+" pointermove MSPointerMove",function(t){if(!d)return!0;t.preventDefault(),o=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,c=t.originalEvent.pageY||t.originalEvent.touches[0].pageY,l=a-o,r=s-c,n.animationSlide&&(u?W(0,-l+"px"):R.css("left",h-l+"px"))}).on("touchend."+E+" mouseup."+E+" touchcancel."+E+" mouseleave."+E+" pointerup pointercancel MSPointerUp MSPointerCancel",function(t){if(d){d=!1;var e=!0;!n.loop&&(0===I&&l<0&&(e=!1),I>=g.length-1&&l>0&&(e=!1)),Math.abs(l)>n.swipeTolerance&&e?H(l>0?1:-1):n.animationSlide&&(u?W(n.animationSpeed/1e3,"0px"):R.animate({left:h+"px"},n.animationSpeed/2)),n.swipeClose&&Math.abs(r)>50&&Math.abs(l)<n.swipeTolerance&&j()}})},N=function(){k.off("click","button"),t(i).off("click."+E,".sl-close"),t(e).off("resize."+E),t(e).off("hashchange."+E)},Y=function(){var e=I+1<0?g.length-1:I+1>=g.length-1?0:I+1,i=I-1<0?g.length-1:I-1>=g.length-1?0:I-1;t("<img />").attr("src",g.eq(e).attr(n.sourceAttr)).on("load",function(){-1==h.indexOf(t(this).attr("src"))&&h.push(t(this).attr("src")),g.eq(I).trigger(t.Event("nextImageLoaded.simplelightbox"))}),t("<img />").attr("src",g.eq(i).attr(n.sourceAttr)).on("load",function(){-1==h.indexOf(t(this).attr("src"))&&h.push(t(this).attr("src")),g.eq(I).trigger(t.Event("prevImageLoaded.simplelightbox"))})},H=function(e){g.eq(I).trigger(t.Event("change.simplelightbox")).trigger(t.Event((1===e?"next":"prev")+".simplelightbox"));var i=I+e;if(!D&&(!(i<0)&&!(i>=g.length)||!1!==n.loop)){I=i<0?g.length-1:i>g.length-1?0:i,t(".sl-wrapper .sl-counter .sl-current").text(I+1);var a={opacity:0};n.animationSlide&&(u?W(n.animationSpeed/1e3,-100*e-l+"px"):a.left=parseInt(t(".sl-image").css("left"))+-100*e+"px"),t(".sl-image").animate(a,n.animationSpeed,function(){setTimeout(function(){var i=g.eq(I);c.attr("src",i.attr(n.sourceAttr)),-1==h.indexOf(i.attr(n.sourceAttr))&&T.show(),t(".sl-caption").remove(),z(e),n.preloading&&Y()},100)})}},j=function(){if(!D){var e=g.eq(I),i=!1;e.trigger(t.Event("close.simplelightbox")),n.history&&y(),t(".sl-image img, .sl-overlay, .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter").fadeOut("fast",function(){n.disableScroll&&K("show"),t(".sl-wrapper, .sl-overlay").remove(),N(),i||e.trigger(t.Event("closed.simplelightbox")),i=!0}),c=t(),p=!1,D=!1}},K=function(n){var a=0;if("hide"==n){var o=e.innerWidth;if(!o){var s=i.documentElement.getBoundingClientRect();o=s.right-Math.abs(s.left)}if(i.body.clientWidth<o){var l=i.createElement("div"),r=parseInt(t("body").css("padding-right"),10);l.className="sl-scrollbar-measure",t("body").append(l),a=l.offsetWidth-l.clientWidth,t(i.body)[0].removeChild(l),t("body").data("padding",r),a>0&&t("body").addClass("hidden-scroll").css({"padding-right":r+a})}}else t("body").removeClass("hidden-scroll").css({"padding-right":t("body").data("padding")});return a};return n.close&&S.appendTo(M),n.showCounter&&g.length>1&&(q.appendTo(M),q.find(".sl-total").text(g.length)),n.nav&&k.appendTo(M),n.spinner&&T.appendTo(M),g.on("click."+E,function(e){if(O(this)){if(e.preventDefault(),D)return!1;P(t(this))}}),t(i).on("click."+E+" touchstart."+E,function(e){p&&n.docClose&&0===t(e.target).closest(".sl-image").length&&0===t(e.target).closest(".sl-navigation").length&&j()}),n.disableRightClick&&t(i).on("contextmenu",".sl-image img",function(t){return!1}),n.enableKeyboard&&t(i).on("keyup."+E,function(t){if(l=0,p){t.preventDefault();var e=t.keyCode;27==e&&j(),(37==e||39==t.keyCode)&&H(39==t.keyCode?1:-1)}}),this.open=function(e){e=e||t(this[0]),P(e)},this.next=function(){H(1)},this.prev=function(){H(-1)},this.close=function(){j()},this.destroy=function(){t(i).off("click."+E).off("keyup."+E),j(),t(".sl-overlay, .sl-wrapper").remove(),this.off("click")},this.refresh=function(){this.destroy(),t(this).simpleLightbox(n)},this}}(jQuery,window,document);